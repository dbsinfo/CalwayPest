@page
@model CalwayPest.Web.Pages.InvoiceListModel
@{Layout = null;}
<!DOCTYPE html><html lang="en">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Invoice List - Calway Pest Control</title>
<link href="fonts/fonts.css" rel="stylesheet">
<style>
html{scroll-behavior:auto !important;}
body{overflow-anchor:none;margin:0;padding:0;font-family:'Open Sans', sans-serif;background-color:#f5f5f5;}

/* Header */
.header{background-color:#ffffff;padding:20px 0;box-shadow:0 2px 4px rgba(0,0,0,0.1);position:sticky;top:0;z-index:100;}
.header-content{max-width:1240px;margin:0 auto;padding:0 16px;display:flex;align-items:center;justify-content:space-between;}
.logo-container img{max-width:350px;height:auto;}
.nav-buttons{display:flex;gap:15px;align-items:center;}
.nav-btn{background-color:#4A6B4F;color:#fff;padding:10px 20px;border:none;border-radius:5px;cursor:pointer;text-decoration:none;display:inline-block;font-size:14px;}
.nav-btn:hover{background-color:#3a5a3f;}
.logout-btn{background-color:#fc5185;color:#fff;padding:10px 20px;border:none;border-radius:5px;cursor:pointer;text-decoration:none;display:inline-block;}
.logout-btn:hover{background-color:#d63163;}

/* Main Content */
.main-content{max-width:1400px;margin:40px auto;padding:0 20px;}
.page-title{color:#4A6B4F;margin-bottom:30px;text-align:center;font-size:32px;}

/* Filters */
.filters-container{background:#ffffff;border-radius:10px;box-shadow:0 2px 10px rgba(0,0,0,0.1);padding:25px;margin-bottom:30px;}
.filters-title{color:#4A6B4F;font-size:18px;font-weight:600;margin-bottom:20px;}
.filters-grid{display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:20px;margin-bottom:20px;}
.filter-group label{display:block;margin-bottom:8px;color:#333;font-weight:500;font-size:14px;}
.filter-group input,.filter-group select{width:100%;padding:10px;border:1px solid #ddd;border-radius:5px;font-size:14px;box-sizing:border-box;}
.filter-actions{display:flex;gap:10px;justify-content:flex-end;}
.filter-btn{background-color:#4A6B4F;color:#fff;padding:10px 25px;border:none;border-radius:5px;cursor:pointer;font-size:14px;}
.filter-btn:hover{background-color:#3a5a3f;}
.clear-btn{background-color:#727586;color:#fff;padding:10px 25px;border:none;border-radius:5px;cursor:pointer;font-size:14px;}
.clear-btn:hover{background-color:#5a5f6e;}

/* Table */
.table-container{background:#ffffff;border-radius:10px;box-shadow:0 2px 10px rgba(0,0,0,0.1);padding:25px;overflow-x:auto;}
.invoices-table{width:100%;border-collapse:collapse;}
.invoices-table thead{background-color:#f5f5f5;}
.invoices-table th,.invoices-table td{padding:15px;text-align:left;border-bottom:1px solid #ddd;}
.invoices-table th{color:#333;font-weight:600;font-size:14px;text-transform:uppercase;}
.invoices-table tbody tr:hover{background-color:#f9f9f9;}
.invoices-table td{color:#555;font-size:14px;}
.status-badge{padding:5px 12px;border-radius:15px;font-size:12px;font-weight:600;display:inline-block;}
.status-draft{background-color:#ffeaa7;color:#6b5e00;}
.status-sent{background-color:#74b9ff;color:#003d82;}
.status-paid{background-color:#00b894;color:#fff;}
.status-cancelled{background-color:#fc5185;color:#fff;}
.view-btn{background-color:#4A6B4F;color:#fff;padding:6px 15px;border:none;border-radius:3px;cursor:pointer;font-size:12px;text-decoration:none;display:inline-block;}
.view-btn:hover{background-color:#3a5a3f;}
.no-results{text-align:center;padding:40px;color:#999;font-size:16px;}

/* Pagination */
.pagination{display:flex;justify-content:center;margin-top:20px;gap:5px;}
.pagination a,.pagination span{padding:8px 12px;border:1px solid #ddd;border-radius:3px;color:#4A6B4F;text-decoration:none;font-size:14px;}
.pagination a:hover{background-color:#4A6B4F;color:#fff;}
.pagination .current{background-color:#4A6B4F;color:#fff;border-color:#4A6B4F;}

/* Responsive */
@@media (max-width: 768px) {
    .logo-container img{max-width:208px;}
    .nav-buttons{flex-direction:column;gap:10px;}
    .filters-grid{grid-template-columns:1fr;}
    .table-container{padding:15px;}
    .invoices-table{font-size:12px;}
    .invoices-table th,.invoices-table td{padding:10px 8px;}
}
</style>
</head>
<body>
<!-- Header -->
<header class="header">
    <div class="header-content">
        <div class="logo-container">
            <a href="/">
                <img src="../assets.zyrosite.com/cdn-cgi/image/format=auto,w=768,fit=crop,q=95/mjE7pQKNg6tZrakl/pest-control-logo-name-in-one-line-YrDJv9KQpbFRbnKV.png" alt="Calway Pest Control logo" />
            </a>
        </div>
        <div class="nav-buttons">
            <a href="/Dashboard" class="nav-btn">Dashboard</a>
            <a href="/InvoiceList" class="nav-btn">Invoices</a>
            <a href="/Invoice" class="nav-btn">Create Invoice</a>
            <form method="post" asp-page-handler="Logout" style="display:inline;">
                <button type="submit" class="logout-btn">Logout</button>
            </form>
        </div>
    </div>
</header>

<!-- Main Content -->
<div class="main-content">
    <h1 class="page-title">Invoice List</h1>

    <!-- Filters -->
    <div class="filters-container">
        <h2 class="filters-title">Filter Invoices</h2>
        <form method="get">
            <div class="filters-grid">
                <div class="filter-group">
                    <label for="invoiceNumber">Invoice Number</label>
                    <input type="text" id="invoiceNumber" name="invoiceNumber" value="@Model.InvoiceNumberFilter" placeholder="Search..." />
                </div>
                <div class="filter-group">
                    <label for="customerName">Customer Name</label>
                    <input type="text" id="customerName" name="customerName" value="@Model.CustomerNameFilter" placeholder="Search..." />
                </div>
                <div class="filter-group">
                    <label for="status">Status</label>
                    <select id="status" name="status">
                        <option value="">All Statuses</option>
                        <option value="Draft" selected="@(Model.StatusFilter == "Draft")">Draft</option>
                        <option value="Sent" selected="@(Model.StatusFilter == "Sent")">Sent</option>
                        <option value="Paid" selected="@(Model.StatusFilter == "Paid")">Paid</option>
                        <option value="Cancelled" selected="@(Model.StatusFilter == "Cancelled")">Cancelled</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="fromDate">From Date</label>
                    <input type="date" id="fromDate" name="fromDate" value="@Model.FromDateFilter?.ToString("yyyy-MM-dd")" />
                </div>
                <div class="filter-group">
                    <label for="toDate">To Date</label>
                    <input type="date" id="toDate" name="toDate" value="@Model.ToDateFilter?.ToString("yyyy-MM-dd")" />
                </div>
            </div>
            <div class="filter-actions">
                <a href="/InvoiceList" class="clear-btn">Clear Filters</a>
                <button type="submit" class="filter-btn">Apply Filters</button>
            </div>
        </form>
    </div>

    <!-- Table -->
    <div class="table-container">
        @if (Model.Invoices != null && Model.Invoices.Any())
        {
            <table class="invoices-table">
                <thead>
                    <tr>
                        <th>Invoice #</th>
                        <th>Date</th>
                        <th>Customer Name</th>
                        <th>Customer Email</th>
                        <th>Total Amount</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var invoice in Model.Invoices)
                    {
                        <tr>
                            <td>@invoice.InvoiceNumber</td>
                            <td>@invoice.InvoiceDate.ToString("MMM dd, yyyy")</td>
                            <td>@invoice.CustomerName</td>
                            <td>@invoice.CustomerEmail</td>
                            <td>â‚¹@invoice.TotalAmount.ToString("N2")</td>
                            <td>
                                <span class="status-badge status-@invoice.Status.ToLower()">@invoice.Status</span>
                            </td>
                            <td>
                                <a href="/InvoiceDetail?id=@invoice.Id" class="view-btn">View</a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        }
        else
        {
            <div class="no-results">
                <p>No invoices found.</p>
            </div>
        }
    </div>
</div>
</body>
</html>
